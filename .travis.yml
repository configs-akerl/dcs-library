dist: xenial
git:
  submodules: false
env:
  global:
  - BUCKET=akerl-dcs-library-config
  - CONTENT_BUCKET=akerl-dcs-library
  - AWS_DEFAULT_REGION=us-east-1
  - secure: Wqn0hyHwrB6M3l/HDY+ZCfbzR6bmDVjjZE6AZpZLzH0t3svNlBBHkvJ/IYMKe38JsroMg05ZstMdirAzoX9dhhQeDaF6kru53OQbhlJuDmVzEqV1fOVwgDjYADk0ptB3U1uoRRn2Z5U7kymZ7GXIwErbFWmUA/rQROdOyfcXHG1bfbtkHSpJ7bUQHWukE3K58T+DOd5s9LbC9pMn1YW3teYGfybDEl53Mbz+c/iuTTUAFHJbNmyskQOc+FIUgZd+kgrhK0Vt0rgXpitsk7aFPTtgDlXiQ+z3UkYNuydTDAH0epNV4Gt3ZpzALB12KSEiwET5OTvJLwRK4PTh9PTRt3jyXrWHLDZYgcWMkdmBfO18Okm/UbFzK8wUGImoxUlBS5IHLMMCD0GhZkN075nDNlQW0tCCNQZyhr6rMYTyHlKhqUvg/0m6Uu5ZMXbmPl4FTsvHieusqGk93sXh9Q8xY2MT6gXF9hkDsYLndMEzJw+cE7KaCFG4UoePJKooj2JpFj56uLMi0bSZIJj4WCbd6guMgGs+hUfITshdVB2lm4zXw0faRLeog/bak7iH5XtHob1pBerHtlMI3ArLd0ROfl/7smlkGawso12XDuF5AGv6w85e1urfkqWVH0m+0jQL5k8ddnCH/d4bzYwGvcdcYub+v2YobOsQLfe9Z+W4d0w=
  - secure: Hg57lQ/No58gqiV9hkjV0qcjqQkhaWOPv8Po7JKtjRzOjQ4H0VuRdaCTbqu97PLT4/BvBj4yCuI+DaFCcjIiUYgDblKyW9bJhcnY1zPqVWa/yhrFeccixtPTWMT5pgqV7ldGDXWGVAvWmRof39sJnF7+qo6df6SeO7ZfkOx73dzP/HBbX7Cc16j3PK1jhlFIX4ZT0VNyj7WIp6xGNW2cZh9KxxGzczWbLdSXZ17IWJvG4dFkp0Ri0eXqUj7ToYsqpvGV2LS40dITLHUXJXlRJrjwgWLFx/A9j5XAbgYZ4LKH4MirD/byZRg+o9MDjQ2h1j/t3F8bZAeWjxvlK/XbM4Fpob6rG5UyoW2k51xk9oqSpFMuzBoI+m7Dtn51ljDYMbf4tUVfLS0EmspEnEETI0vMrpeOrScSv1ddnajidsKGBKDD0dblWaSQpThEeRUx9+JNAFJsWvramet4+48MN/Sxbwg85TQ6jQtcMqwxyyFJkI0Hl9lB5ZQFSskA2ENmMFIVwZmJGJQTpo10RNwnA8t6+cIsXTcUIvxmkDhr8cmep1VZ3pOIUc1g6n1UnsQIZDNpdLdo6RDevNyu+gQBYltCjLzUHv6JtLngkQyzSD+chclV2U8VTdgUUa92LIdJmY+uiEOgZf5vzK25UaEXOU0OcQwLTMf3rTw5ebK0vpI=
  - secure: qAoEEENC9fN5K4WlRpEI712ZoG6Vn9Jh3s67EYppXM9om6zbUGcSVPXr35eWTFWepRzWfjzu4YezM6DCMrFTjvgTb/WX3CJDVv1TFXkiQDLQM0VAyWRbJLUa60qZ4wYFDDJNLVXPYYqdkPXTzQ32Dep1iBryeDAs36dd1NbuUaGuXEJaQy+jkvQqaMStxW7Bjf1Q61WpgJYmXhzljy4chR6Uilc4iKVf40ATb7gytuhHy8qw0dPH49pKS9sXh5vtJDwB9YCaYODuA35gmTdAkYMb5hU6Jc27klDPGlXqJ8XspxYMFjfSsM5pU3t0QnlmwBqtIYrSnzFxlq9wcuBVume1vBmo7XbfNRVuymPJ69RbIS5UXELrzGxP9xUjJ0wcUwt11GBA0tVIKR5IUFK8VMhXlWWxiv2t10WBTF4uZWQP61J6hQu9Aun8Z3EjQlXRlL+9T1ykaLKzrsrt0Q1T0zmFeuIeGZ5HYEiLIHkJw43UhwmCMimLel8/6TZXpGmjzJ5wXBW+Qzfy+WBow+itHpNOvm6S9gGVVtKYV9oo6jjDspTjylllD3nfhjhCSwjM9XdJeLu2VWen+uMdlim8x0/6d5H8yajbToerF2gnEht2BuOLPPReQ7ZBaSFPWAHsTEFWFya1gafFqHwNU18h95IyvJdtEd39gOzhlP1PK1I=
  - secure: P+3cd9aV8J25HFkm/tLP0BXPuI5WzKmLXQ+G31SdelMq/cfwVhOB5yRiotDqKnEjo9F+Je+b+cogoumsbJQna7ksm274C0Ud0t3KTc+c7qeli5VMIvgXs3J/GGHDvQFig8I30zVz+L/9bUUU+ZRNzyVpdazcWWISwxzZ58JUuaBbVc/W9eduP0hYKQrdYU2iTUIKYx/0HXbMSXpMuXNDFY9YE/joZspi7VBFYRaRN8dTuyZuVfm9bQDSIP4SVNqEJiRlZkY/OC2mHtZV+JCOoJnIRK7BIBOaSCefBjwdn/I3Wf8KDKFqnkgTQ1y3tyxn+QBHGUcHZUmb6FVV4TBRR2GbfhqMVjGcl6vtWA8ePpLjwMH2roXehiotjwVZA54VVyq4vWMSkTbqr6IxiEpj/Rc9h2adfj05y6hSIj0FYm5OTl2ukpjajWYUaIB8hy8prIW9yZjot2SXh8Yhqg3vLtGEvJxGDkTtI5jD8cJ63Nx5Nep6usab2oHf+CofOcXrdQOKVyZVt8VMQjg/xZjUg0AeOlY+54oUOejP598G9Dv+xOqj6tH7lX5k4b06/0yhj9Hcoh4IA8LdguUDoD0Phf0MLWlaCunoLU4SlDAixCz8LMpE0O1pYYXXxtvzuEi5/5rZOsZOjeULasFenSsJt1YwxgAFpAMbWwAs1U1qPKI=
  - secure: IHewLeGC1VKboylYy4w71RlUSLU+j8IEsZVFA2FJzZUuCax2aXs1VG4vSO4879zb4W5TnbRJaYmbyKf1kjmwLRnc8uJichwSNno50hC52hIjzmjCkSzOuKvrWtpOJztjULAhTcIRDKNWHu4g+p/4DTWbnwNnbADW1INOKfshUSvMhGLwSCjyjrWScOKC8xD64o9JzxrenRMsrrvHu/ZGBoXdb2YWZ6TvXSDSKK9cS56UaUXhnrJNC99JBGX3cKi+JvhZ16sAlprVadMO/euJTZ6b7fDK+aeMW13Bzqs1DJ2rojIJ/CJ1Q8B7wzDkb6XrIApBxc7mXyUO7XipRP73YpZl6IsNayDPEoSXtny51Rzid9mwiWjVivcqqFP4ukLliRmUGsyQuH7xHxmGSAVeub0hO5wjEO19/7+NBz8nCB/ySBxNuph+i2xNLHUHOrlvfnTwuCTezniPW9ztBxV7SQJhzOCKH+4yzeAPGhBwj1XNckwAudyEK7LiruVpOlNyZvloP/lrVNy8uxGzxrBHncHr64BhiAChgGb+43b5IZm98U8/gVmd4ool2KJB/D4I6422J8bq7V8b+LmSXlw6LQDPDL9Gmj+YktD4KoAgJogLmdHG6flLw1Hq6jBPw/UNj09UZZieU3Njb0Vm4omCP2lrJn0f3hB+XjitLmYCl70=
  - secure: kdvdDETk5m3JqxFdRldB3F99JeoTuKVS4HDY+inPM86HDEbI3V8hKt7DaWh1LA0k3HCGtOZQIVC1ZsQClOz1pAHVHL77yIcrQ4o/zueFHRN5U4qnAn26hKlXIAv8DtvScip3Vi+wot7WK2/9ehAFHQ6vhLLa1bCXWXNWadAvOerBwNEAyXZmFV4wOOsVuZMrw9qv7oxf4GElfPN3zKVe1x0sEDxhbIiDoxzNTjeQOaMRjRfag9W1xE7LmF8UzZiVUHOFVXoTL5C55FaI1Y7nPgCVBGRUDbisgt9qenLIs9VaISYrKqERYvl4YGMLaUwkFpuUFZpKtpak4oATPbpPR4zYCRZNj3Bz6vlggNQo31sQla8ozbJzVjaKXWdHN53DJlTxutA/mbONEy5WZQPDMHn2R/9XMBIwH6hmjo8KbB0qOHORvjVQCu1cDIcH2tLz7hCU2/CfcrzfEnFwzj1Ywlb8n2whMUj+p3CZVPCSmSSgwa0EmVtF71Xquzc+57x2aAlrD2UsKyoAwyno+aPAj8U1c8579r3QBTeG90FNioh9HOCxZrC+adhemwWiFwCZ2RTHGuZ2yUUVQVkHi3nNQK+8HAK8cjqgCRruao7qf3X6tcp6mxQOrd20dbo6OsPKSEY28T6WZ+IMmJdJ8F3K5xfAxVFq4IVFd+Jg8MU41ss=
  - secure: Ph4x4AJDV9Xa4AbYGTIWqxKbYO4EWyxy3yHBkUis8sB3QKtUxJrAtBNv36fM06bXf3KSRZ4ljZrGhccM2Oz1jCjuNCacJi9PXzS1OCjsVtChIqJrEhwnneJ/6YzhM35dIYfY7J4Ka4ScWC63wXWt2M7lFX0hPO0CZ3VHqOFIFNztWhQYCCTZOZuSXb5JkbGM9PYlqpgYUL6SkockcFymcAi6Ixl/KwRl7jcLdrOH885KC6U3roEruVYUKjxGvd4JSEDMAko0mjdT3XJ/kEU0AzHTt+Zly1oVE0BEBs6V6Ru7e2tTdf/jNykO5FS1idQdRN7fkV+xHuh0Z6Zd6FdY+K8VUE+K/EzbiCM2zM2m3/9TI7JsGqS+etLUqknzOnhXrZcOTK7J60UjV8wy67emsVHBxaGdU08a9A0zLx7Rm2oOJj7Xdskgxwbe+wHTnmD5/WznFFDWaONT+cM4kzyk5rOIq5PsHf9xIYnMvs5x27X6JW3oqcKRs6EgOFaQF6WomRalT56q9nCyOpyUWz51GCwTPaDbD6IbGVhRjamA9PUd3lPwJwkH2XvCF3rRogiV3WBbACAUjyNLHn/3q4EOqZFbuklI+Dvj35LaBLuNaHCIUr+8hBBS0xmkdi7F/I5Cz6cUHvgGxm6oczcFEKm7gKzDeaRf0TdWoSAULnOYkw4=
  - secure: tIst/BDhgymxeJdJsokEzT0tN8TtRnVFPo0j9wMo+cfvpWVpbH61y3l6y7TKQHc3J5XFSDIwE0cCZvn7bhwKjniZrd+B/wJYM5mQe7oKMeHqGby+AxIz4VkcY9fdo7h73Cp0j3JVL/C0KDHMR9nF+ArXLol39KDPIUYxoPx+MROqDtrpHxS15OJqxgTomTDfP1i2VBOEU2BMHl8zcXf62W5BwREnDiRi5H/zElQ6KoaUNhmZEDc1+vn5YUf4ntMylrGf6a7xzBGi+8tTVb0ipz46ilW1DEe8Eij+LdA7M919hZ9F5j6hv1FWq9Hx76Q/ZY3O27LvdtZ2DEe+ekS1fIjGIn3UEvhWpp+cJOGRUkodwx9o9mNjPX5LDZlzJ60+/RMpxq9Z8SRu8uaRAuU+6PNfhW6hB7C4MyubVktyygMqLfYy7BXDtl4qWgPraHpMVeSyTnGSQMBlQyMbPQzedUmiriEJ0XKdX6FbWd5Ll9dNTUW9nGEMHJGZkKMsaGPLaUIQrYMQVSlCCbQ0yflDRWOIPJfBzVfF6WMIQGpmNTFiekCgwMtRJ4IOwabxa/G9Bc3nAMZF3cqHaO8BYQDb5Cl5THpXLBMKKi3mzI5nyClLnYzDZMn8WCqlU+UudibDSh0jP3rrW/vTZUSvu9jA9oLzIl0TSlWmT49fz44blmg=
  - secure: hAqC1dMR+Iz42jyHD/wEDgiJVZHL7/zza/h1Ejjed9zIe+mABCFJlYuOHMgxcweeWI58JO/oFY0kqgAm6qp1puF+3Zvr6qZuiWRN6fr3jtHkOetEsP5f7qdnIPfmBqjQgvooRDeennlmn+yF7fTopSC4G8C9VvjCK8xUs1D+bZ7XQCXY4Tb0wTWnhjxiCKqaG8jlzCBtQPaKQw6VluNAHPoP6udchZ5+BY3UvsPu7SDwTnkZWNjb7re1amNKESuqzUE6ojcBMt4isp4jG8TFDPCEw5+RNmau1RMueIgpDSBOKxbRRZrDMuJhnCQs7SRemfAZ/0769vT0kVUPmw7J/AZUoZ6x3KX94ick2s5bXI8jXkQ/PsfhILnyKqhss1FQP8LOSNwFe89yWGyhUE4G/+Z6042t4wu/rCsM7tZ2fWzpApiYeVRRqaDheMtR4yhYjWQ3loARV3juEnLNeKE8QbJxvnJ4Jw7cg/HqEGIQARt6xIF2Gb84gCrkmNf/cZ32CWJeQiDLCgsl7jrrzP4kLc/aN9zmI/ehZG4CiXZrHATfXojtIiFUSijkEtLnpeTJMIwEUG6VsLNjdj981kTzodMmoGb3BsEdDMeazdJ1PRAhrjrrmcklEHBpie682fXvYzSwQzeqVi+MDavMwsngjiW15grvbSm8W3XiK/JW3z0=
before_install:
- openssl aes-256-cbc -K $encrypted_feef038d51ef_key -iv $encrypted_feef038d51ef_iv
  -in deploy_key.enc -out deploy_key -d
- chmod 600 deploy_key
- echo "IdentityFile deploy_key" >> ~/.ssh/config
- git submodule update --init
- scripts/deps.sh
- go get github.com/akerl/madlibrarian
script:
- scripts/template.py config.yaml.j2 config.yaml
- scripts/upload.sh config.yaml
- "./upload_content.rb"
notifications:
  email: false
  slack:
    secure: nbREIo9owlB4F5nHZe1KJH8RUDMWGgtU1ur0nSYPTOERjTFBd1scrdmIj1av6j/uChfdeQt5m+JYJg7xX7jQYEZWxYLgq8D6ANwQNIhc8UfzMaD5yFIswuMc23VOLx8YlQFiUwGsU1YYhXlSPekQbqUoETy4Wqbc6skgbX0AaePaPaLi7uBXlCSJUdXcsw0fCBzWH1+bD12fv6WRBJ+YMMWOv1BFm5Y2UNbd7wzJ6y/t6KpVrHk9YwausV7dcLh1O4lCDIIS7gshovABtkqblsjXknH20ktlSRwvHHSiWlyZBh3SWSpUXTn1dTChuuunWigWgKDfZMlaRRlr4FHNh18UApTOcfYECpUu0YrY60EyxfoiYCzv5r4fX5iKmFAKpU9oj4kDfNSJaoPY2AaEyTyv9Yy/ni50x+lVvjBz03wa7v8V7jz8fddHOVKBXCy7+UNDYwm8locBfWzeSHbw/rLHDoiC1oR6KAstJlz05Qgs/BUWQm2UIfJZ+gIZiql0YVlwPZGed1UtIHMGSU19Ynp/2sz7vb+2ODe1cHFa8xzJGtHlRg4o5gL09NYNMEh5iE6AUZ4VdbgPME8oAQPXXzpt7T46+adUasl1tDqe7aHlUZ4g/fp9blUD9of3/l3vf866oj/7077M1RubqwvNGCUMZQGLhcFnt3Ng7j+Nowk=
